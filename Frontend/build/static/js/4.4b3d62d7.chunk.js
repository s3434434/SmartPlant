(this.webpackJsonpdemeter=this.webpackJsonpdemeter||[]).push([[4],{114:function(e,t,n){},53:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(7);var i=n(5);function s(e){return function(e){if(Array.isArray(e))return Object(a.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(i.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},63:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return l}));var a=n(53),i=n(4),s=n(1),c=(n(114),n(0));function l(e){var t=e.sensorReadings,n=e.admin,l=e.wideView,r=Object(s.useState)("All time"),o=Object(i.a)(r,2),d=o[0],j=o[1],h=Object(s.useState)("Loading sensor data..."),u=Object(i.a)(h,2),b=u[0],m=u[1],g=Object(s.useState)(null),p=Object(i.a)(g,2),x=p[0],O=p[1],f=Object(s.useState)([]),y=Object(i.a)(f,2),k=y[0],v=y[1],N=Object(s.useState)([]),w=Object(i.a)(N,2),A=w[0],C=w[1],I=Object(s.useState)([]),M=Object(i.a)(I,2),S=M[0],D=M[1],P=Object(s.useState)(1),T=Object(i.a)(P,2),K=T[0],F=T[1];Object(s.useEffect)((function(){null!==t&&("string"!==typeof t?H("All time"):m(t))}),[t]);var H=function(e){j(e);var i=[];if("All time"===e)i=t;else{var s,c=(new Date).getTime();switch(e){case"Hour":s=c-36e5;break;case"Day":s=c-864e5;break;case"Week":s=c-6048e5;break;case"Month":var l=(s=new Date).getMonth();s.setMonth(s.getMonth()-1),s.getMonth()===l&&s.setDate(0),s=s.getTime();break;case"Year":var r=(s=new Date).getMonth();s.setMonth(s.getMonth()-12),s.getMonth()===r&&s.setDate(0),s=s.getTime()}t.forEach((function(e){var t=new Date(e.timeStampUTC+"Z").getTime();t<=c&&t>=s&&i.push(e)}))}if(i.length>0){m(i);var o=0,d=0,h=0,u=0;i.forEach((function(e){o+=e.temp,d+=e.lightIntensity,h+=e.moisture,u+=e.humidity})),o/=i.length,d/=i.length,h/=i.length,u/=i.length,O({temperature:o,lightIntensity:d,moisture:h,humidity:u});var b=Math.floor(i.length/9);i.length%9!==0&&b++;var g=Object(a.a)(Array(b).keys());g.forEach((function(e){g[e]++})),v(g),C(g.slice(0,10)),D(g.slice(0,5)),F(1)}else{m("All time"===e?n?"No sensor data available.":"No sensor data available. Please make sure you have correctly input your token into the Arduino.":n?"No sensor data available. The sensors may not have collected enough data for this timeframe.":"No sensor data available. Your sensors may not have collected enough data for this timeframe. Otherwise, please make sure you have correctly input your token into the Arduino.")}},Y=function(e){if(e>=1&&e<=k.length){if(e===A[0]-1||e===A[A.length-1]+1){var t,n;e===A[0]-1?(t=e-1,n=e+10-1):e===A[A.length-1]+1&&(t=e-10,n=e);var a=k.slice(t,n);a.length>=A.length&&C(a)}if(e===S[0]-1||e===S[S.length-1]+1){var i,s;e===S[0]-1?(i=e-1,s=e+5-1):e===S[S.length-1]+1&&(i=e-5,s=e);var c=k.slice(i,s);c.length>=S.length&&D(c)}F(e)}};return Object(c.jsxs)("div",{className:l?"w-50 text-center m-auto gold-border":"m-auto text-center px-2 mb-2 gold-border",children:["string"===typeof b?Object(c.jsx)("span",{style:{color:"white"},children:b}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"overflow-auto",children:Object(c.jsxs)("table",{className:"table",children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:"Time"}),Object(c.jsx)("th",{children:"Temperature"}),Object(c.jsx)("th",{children:"Light intensity"}),Object(c.jsx)("th",{children:"Moisture"}),Object(c.jsx)("th",{children:"Humidity"})]})}),Object(c.jsxs)("tbody",{children:[null!==x?Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:"Average"}),Object(c.jsxs)("td",{children:[x.temperature.toFixed(1)," \xb0C"]}),Object(c.jsxs)("td",{children:[x.lightIntensity.toFixed(1),"%"]}),Object(c.jsxs)("td",{children:[x.moisture.toFixed(1),"%"]}),Object(c.jsxs)("td",{children:[x.humidity.toFixed(1),"%"]})]},"average"):null,b.slice(9*(K-1),9*K).map((function(e){return Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:(t=e.timeStampUTC,new Date(t+"Z").toLocaleString("en-AU",{timeZone:"Australia/Melbourne"}))}),Object(c.jsxs)("td",{children:[e.temp.toFixed(1)," \xb0C"]}),Object(c.jsxs)("td",{children:[e.lightIntensity.toFixed(1),"%"]}),Object(c.jsxs)("td",{children:[e.moisture.toFixed(1),"%"]}),Object(c.jsxs)("td",{children:[e.humidity.toFixed(1),"%"]})]},e.timeStampUTC);var t})),9-b.slice(9*(K-1),9*K).length>0?Object(a.a)(Array(9-b.slice(9*(K-1),9*K).length).keys()).map((function(e){return Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{className:"hidden-field",children:"-"}),Object(c.jsx)("td",{className:"hidden-field",children:"-"}),Object(c.jsx)("td",{className:"hidden-field",children:"-"}),Object(c.jsx)("td",{className:"hidden-field",children:"-"}),Object(c.jsx)("td",{className:"hidden-field",children:"-"})]},e)})):null]})]})}),Object(c.jsx)("nav",{className:"overflow-auto",style:{backgroundColor:"transparent"},children:Object(c.jsxs)("ul",{className:l?"pagination justify-content-center":"pagination pagination-sm justify-content-center",children:[Object(c.jsx)("li",{className:"page-item",children:Object(c.jsx)("span",{className:"page-link",tabIndex:"0",onClick:function(){Y(K-1)},onKeyPress:function(){Y(K-1)},children:"Previous"})}),l?A.map((function(e){return Object(c.jsx)("li",{className:"page-item",children:Object(c.jsx)("span",{className:K===e?"page-link page-link-selected":"page-link",tabIndex:"0",onClick:function(){Y(e)},onKeyPress:function(){Y(e)},children:e})},e)})):S.map((function(e){return Object(c.jsx)("li",{className:"page-item",children:Object(c.jsx)("span",{className:K===e?"page-link page-link-selected":"page-link",tabIndex:"0",onClick:function(){Y(e)},onKeyPress:function(){Y(e)},children:e})},e)})),Object(c.jsx)("li",{className:"page-item",children:Object(c.jsx)("span",{className:"page-link",tabIndex:"0",onClick:function(){Y(K+1)},onKeyPress:function(){Y(K+1)},children:"Next"})})]})})]}),Object(c.jsxs)("nav",{className:"mt-4 overflow-auto",style:{backgroundColor:"transparent"},children:[Object(c.jsx)("h4",{className:"text-center gold",children:"Sample timeframe"}),Object(c.jsxs)("ul",{className:l?"pagination justify-content-center":"pagination pagination-sm justify-content-center",children:[Object(c.jsx)("li",{className:"page-item",children:Object(c.jsx)("span",{className:"Hour"===d?"page-link page-link-selected":"page-link",tabIndex:"0",onClick:function(){H("Hour")},onKeyPress:function(){H("Hour")},children:"Hour"})}),Object(c.jsx)("li",{className:"page-item",children:Object(c.jsx)("span",{className:"Day"===d?"page-link page-link-selected":"page-link",tabIndex:"0",onClick:function(){H("Day")},onKeyPress:function(){H("Day")},children:"Day"})}),Object(c.jsx)("li",{className:"page-item",children:Object(c.jsx)("span",{className:"Week"===d?"page-link page-link-selected":"page-link",tabIndex:"0",onClick:function(){H("Week")},onKeyPress:function(){H("Week")},children:"Week"})}),Object(c.jsx)("li",{className:"page-item",children:Object(c.jsx)("span",{className:"Month"===d?"page-link page-link-selected":"page-link",tabIndex:"0",onClick:function(){H("Month")},onKeyPress:function(){H("Month")},children:"Month"})}),Object(c.jsx)("li",{className:"page-item",children:Object(c.jsx)("span",{className:"Year"===d?"page-link page-link-selected":"page-link",tabIndex:"0",onClick:function(){H("Year")},onKeyPress:function(){H("Year")},children:"Year"})}),Object(c.jsx)("li",{className:"page-item",children:Object(c.jsx)("span",{className:"All time"===d?"page-link page-link-selected":"page-link",tabIndex:"0",onClick:function(){H("All time")},onKeyPress:function(){H("All time")},children:"All time"})})]})]})]})}}}]);
//# sourceMappingURL=4.4b3d62d7.chunk.js.map