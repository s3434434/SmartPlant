(this.webpackJsonpdemeter=this.webpackJsonpdemeter||[]).push([[20],{117:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return m}));var n=a(4),s=a(1),r=a(46),o=a.n(r),c=a(44),i=a.n(c),l=(a(84),a(0));function m(e){var t=e.logOut,a=e.wideView,r=Object(s.useState)({email:"",password:""}),c=Object(n.a)(r,2),m=c[0],d=c[1],u=Object(s.useState)(!1),p=Object(n.a)(u,2),b=p[0],j=p[1],h=Object(s.useState)("-"),f=Object(n.a)(h,2),g=f[0],x=f[1];Object(s.useEffect)((function(){document.title="Login | Demeter - The plant meter",t()}),[]);var w=function(e){var t=e.target,a=o.a.cloneDeep(m);a[t.name]=t.value,d(a)};return Object(l.jsxs)("section",{children:[Object(l.jsx)("h1",{className:"gold text-center",children:"Login"}),Object(l.jsxs)("form",{className:a?"w-25 m-auto mt-4":"m-auto mt-4 px-2",onSubmit:function(e){e.preventDefault(),x("Please wait..."),j(!0),i.a.post("https://smart-plant.azurewebsites.net/api/Account/Login",m).then((function(e){var t=e.data;i.a.get("https://smart-plant.azurewebsites.net/api/User/Role",{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){var a=JSON.stringify({token:t,expiry:Date.now()+36e5,admin:"Admin"===e.data});localStorage.setItem("demeter-login",a),window.location.pathname="/"})).catch((function(e){x("Server error. Please try again later.")}))})).catch((function(e){var t="Server error. Please try again later.",a=e.response.data.messages;void 0!==a["Login Details"]&&(t=a["Login Details"][0]),x(t)}))},children:[Object(l.jsx)("label",{className:"form-label gold",htmlFor:"email",children:"Email"}),Object(l.jsx)("input",{className:"form-control",name:"email",type:"text",value:m.email,onChange:w,required:!0}),Object(l.jsx)("label",{className:"form-label mt-3 gold",htmlFor:"password",children:"Password"}),Object(l.jsx)("input",{className:"form-control",name:"password",type:"password",value:m.password,onChange:w,required:!0}),Object(l.jsx)("div",{className:"form-text mt-2",children:Object(l.jsx)("span",{className:"gold light-gold-hover",tabIndex:"0",style:{textDecoration:"none",cursor:"pointer",userSelect:"none"},onClick:function(){window.location.pathname="/forgot-password"},onKeyPress:function(){window.location.pathname="/forgot-password"},children:"Forgot password?"})}),b?Object(l.jsx)("div",{className:"text-center mt-3",children:Object(l.jsx)("span",{children:g})}):Object(l.jsx)("div",{className:"hidden-field mt-3",children:Object(l.jsx)("span",{children:g})}),Object(l.jsx)("div",{className:a?"text-center mt-3":"text-center mt-3 mb-2",children:Object(l.jsx)("button",{className:"btn btn-primary",type:"submit",children:"Login"})})]})]})}},84:function(e,t,a){}}]);
//# sourceMappingURL=20.1de3b36a.chunk.js.map